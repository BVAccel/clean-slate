{%- capture _arguments -%}
  {%- include 'argument',
    _value: menu,
    _name: 'menu',
    _required: true -%}
{%- endcapture -%}

{%- capture _errors -%}
  {%- include 'errors' with _arguments, _snippet: 'main-navigation' -%}
{%- endcapture -%}

{%- assign _arguments = nil -%}

{%- if _errors == '' -%}

<nav class="oo-main-navigation">

  {%- for parent in linklists[menu].links -%}
    <div class="oo-main-navigation--nav-block">

      {%- include 'link',
        href: parent.url,
        content: parent.title -%}

      {%- if parent.levels == 2 -%}

        <div class="oo-main-navigation--subnav-container">

          {%- for child in parent.links -%}

            {%- capture _list -%}
              {%- for grandchild in child.links -%}
                -->{%- include 'link',
                  href: grandchild.url,
                  content: grandchild.title -%}
              {%- endfor -%}
            {%- endcapture -%}

            <div class="oo-main-navigation--subnav-block">

              {%- include 'menu',
                title: child.title,
                level: 3,
                list: _list -%}

            </div>

            {% assign _list = nil %}
          {%- endfor -%}

        </div>

      {%- endif -%}

    </div>
  {%- endfor -%}

</nav>


{%- else -%}

  {{- _errors -}}

{%- endif -%}

{%- assign _errors = nil -%}
