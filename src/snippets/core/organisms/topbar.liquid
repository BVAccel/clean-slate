{%- assign delimeter = '' -%}
{%- if section.settings.is_slider -%}
  {%- assign delimeter = '-->' -%}
{%- endif -%}

{%- capture _content -%}
  {%- for block in section.blocks -%}
    {%- case block.type -%}
      {%- when 'text' -%}
        {{- delimeter -}}{%- include 'text', content: block.settings.title -%}
      {%- when 'icon_with_text' -%}
        {{- delimeter -}}{%- include 'icon-with-text',
          icon: block.settings.icon,
          text: block.settings.title,
          href: block.settings.href -%}
    {%- endcase -%}
  {%- endfor -%}
{%- endcapture -%}

{%- if section.settings.is_slider -%}
  {%- include 'slider',
    name: 'topbar',
    slides: _content -%}
{%- else -%}
  {{- _content -}}
{%- endif -%}
