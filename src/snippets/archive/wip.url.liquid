{%- capture arguments -%}
  {%- include 'argument',
    _name: 'src',
    _required: true,
    _value: src,
    _type: 'String||Liquid Object',
    _description: '' -%}
  {%- include 'argument',
    _name: 'filter',
    _required: true,
    _value: filter,
    _type: 'String',
    _description: '' -%}
  {%- include 'argument',
    _name: 'size',
    _required: false,
    _value: size,
    _type: 'String',
    _description: '' -%}
  {%- include 'argument',
    _name: 'crop',
    _required: false,
    _value: crop,
    _type: 'String',
    _description: '' -%}
  {%- include 'argument',
    _name: 'scale',
    _required: false,
    _value: scale,
    _type: 'Number',
    _description: '' -%}
  {%- include 'argument',
    _name: 'format',
    _required: false,
    _value: format,
    _type: 'String',
    _description: '' -%}
  {%- include 'argument',
    _name: 'descriptor',
    _required: false,
    _value: descriptor,
    _type: 'String',
    _description: '' -%}
{%- endcapture -%}

{%- case size -%}
  {%- when 'pico' -%}
    {%- assign size_error = '16x16' -%}
  {%- when 'icon' -%}
    {%- assign size_error = '32x32' -%}
  {%- when 'thumb' -%}
    {%- assign size_error = '50x50' -%}
  {%- when 'small' -%}
    {%- assign size_error = '100x100' -%}
  {%- when 'compact' -%}
    {%- assign size_error = '160x160' -%}
  {%- when 'medium' -%}
    {%- assign size_error = '240x240' -%}
  {%- when 'large' -%}
    {%- assign size_error = '480x480' -%}
  {%- when 'grande' -%}
    {%- assign size_error = '600x600' -%}
  {%- when 'original' -%}
    {%- assign size_error = '1024x1024' -%}
  {%- when 'master' -%}
    {%- assign size_error = 'Original image' -%}
{%- endcase -%}

{%- if arguments != '' -%}
  {{- arguments -}}
{%- elsif size_error != blank -%}
  ::error,,size_error,,named size parameters are deprecated, instead of `{{ size }}`, use `{{ size_error }}`
{%- else -%}
  {%- case filter -%}
    {%- when 'product_img' or 'product_img_url' or 'collection_img' or 'collection_img_url' -%}
      ::error,,filter_error,,the `{{ filter | remove: '_url' | append: '_url' }}` filter has been deprecated, please use `img_url` instead
    {%- when 'asset' or 'asset_url' -%}
      {{- src | asset_url -}}
    {%- when 'asset_img' or 'asset_img_url' -%}
      {{- src | asset_img_url: size, crop: crop, scale: scale, format: format }} {{ descriptor -}}
    {%- when 'file' or 'file_url' -%}
      {{- src | file_url -}}
    {%- when 'file_img' or 'file_img_url' -%}
      {{- src | file_img_url: size, crop: crop, scale: scale, format: format }} {{ descriptor -}}
    {%- when 'global_asset' or 'global_asset_url' -%}
      {{- src | global_asset_url -}}
    {%- when 'payment_type_img' or 'payment_type_img_url' -%}
      {{- src | payment_type_img_url: size, crop: crop, scale: scale, format: format }} {{ descriptor -}}
    {%- when 'shopify_asset' or 'shopify_asset_url' -%}
      {{- src | shopify_asset_url: size, crop: crop, scale: scale, format: format }} {{ descriptor -}}
    {%- when 'img' or 'img_url' -%}
      {{- src | img_url: size, crop: crop, scale: scale, format: format }} {{ descriptor -}}
    {%- else -%}
      {{- src | img_url: size, crop: crop, scale: scale, format: format }} {{ descriptor -}}
  {%- endcase -%}
{%- endif -%}

{%- assign arguments = blank -%}
{%- assign size_error = blank -%}
