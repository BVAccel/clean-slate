{% unless template == 'index' or template == 'cart' or template == 'list-collections' or template == '404' %}

{% assign t = template | split: '.' | first %}

{% assign background_color = '' %}
{% if background and background == 'white' %}
  {% assign background_color = 'breadcrumbs__breadcrumb-span--white' %}
{% endif %}

<!-- background: {{ background }} -->

<nav class="breadcrumbs{% if additional_class %} {{ additional_class }}{% endif %}" role="navigation" aria-label="breadcrumbs">
  <ol>
    <li class="breadcrumbs__breadcrumb">
      {% if template contains 'product' %}
        <a class="breadcrumbs__link" href="/products" title="Products">Products</a>
      {% elsif
        template contains 'technology'
        or template contains 'about-us'
        or template contains 'our_story'
        or template contains 'blogs'
        %}
        <span class="breadcrumbs__breadcrumb-span {{ background_color }}" href="/products" title="Discover">Discover</span>
      {% endif %}
    </li>

  {% case t %}

    {% when 'page' %}
      <li class="breadcrumbs__breadcrumb">
        <a class="breadcrumbs__link" href="{{ page.url }}" aria-current="page">{{ page.title }}</a>
      </li>

    {% when 'product' %}
      {% if collection.url %}
        {% if collection.handle contains "women" %}
        <li class="breadcrumbs__breadcrumb">
          <a class="breadcrumbs__link" href="{{ collections["womens"].url }}" title="Products">WOMEN</a>
        </li>
        <li class="breadcrumbs__breadcrumb">
          <a class="breadcrumbs__link" href="{{ collection.url }}" title="{{ collection.title }}">{{ collection.title | upcase | remove: "WOMEN'S" | remove: "WOMEN" }}</a>
        </li>
        {% elsif collection.handle contains "men" %}
        <li class="breadcrumbs__breadcrumb">
          <a class="breadcrumbs__link" href="{{ collections["mens"].url }}" title="Products">MEN</a>
        </li>
        <li class="breadcrumbs__breadcrumb">
          <a class="breadcrumbs__link" href="{{ collection.url }}" title="{{ collection.title }}">{{ collection.title | upcase | remove: "MEN'S" | remove: "MEN" }}</a>
        </li>
        {% else %}
        <li class="breadcrumbs__breadcrumb">
          <a class="breadcrumbs__link" href="{{ collection.url }}" title="{{ collection.title }}">{{ collection.title | upcase }}</a>
        </li>
        {% endif %}
      {% else %}
        <li class="breadcrumbs__breadcrumb">
          <span class="breadcrumbs__link">Products</span>
        </li>
      {% endif %}
      <li class="breadcrumbs__breadcrumb">
        <a class="breadcrumbs__link" href="{{ product.url }}" aria-current="page">{{ product.title }}</a>
      </li>

    {% when 'collection' %}
      {% if current_tags %}
        <li class="breadcrumbs__breadcrumb">{{ collection.title | link_to: collection.url }}</li>
        <li class="breadcrumbs__breadcrumb">
          {% capture tag_url %}{{ collection.url }}/{{ current_tags | join: "+"}}{% endcapture %}
          <a class="breadcrumbs__link" href="{{ tag_url }}" aria-current="page">{{ current_tags | join: " + "}}</a>
        </li>
      {% else %}
        {% if collection.handle contains "women" %}
        <li class="breadcrumbs__breadcrumb">
          <a class="breadcrumbs__link" href="{{ collections["womens"].url }}" title="Products">WOMEN</a>
        </li>
        <li class="breadcrumbs__breadcrumb">
          <a class="breadcrumbs__link" href="{{ collection.url }}" title="{{ collection.title }}">{{ collection.title | upcase | remove: "WOMEN'S" | remove: "WOMEN" }}</a>
        </li>
        {% elsif collection.handle contains "men" %}
        <li class="breadcrumbs__breadcrumb">
          <a class="breadcrumbs__link" href="{{ collections["mens"].url }}" title="Products">MEN</a>
        </li>
        <li class="breadcrumbs__breadcrumb">
          <a class="breadcrumbs__link" href="{{ collection.url }}" title="{{ collection.title }}">{{ collection.title | upcase | remove: "MEN'S" | remove: "MEN" }}</a>
        </li>
        {% else %}
        <li class="breadcrumbs__breadcrumb">
          <a class="breadcrumbs__link" href="{{ collection.url }}" title="{{ collection.title }}">{{ collection.title | upcase }}</a>
        </li>
        {% endif %}
      {% endif %}

    {% when 'blog' %}
      {% if current_tags %}
        <li class="breadcrumbs__breadcrumb">{{ blog.title | link_to: blog.url }}</li>
        <li class="breadcrumbs__breadcrumb">
          {% capture tag_url %}{{blog.url}}/tagged/{{ current_tags | join: "+" }}{% endcapture %}
          <a class="breadcrumbs__link" href="{{ tag_url }}" aria-current="page">{{ current_tags | join: " + " }}</a>
        </li>
    
      {% else %}
        <li class="breadcrumbs__breadcrumb">
          <a class="breadcrumbs__link" href="{{ blog.url }}" aria-current="page">{{ blog.title }}</a>
        </li>
      {% endif %}

    {% when 'article' %}
      <li class="breadcrumbs__breadcrumb">{{ blog.title | link_to: blog.url }}</li>
      <li class="breadcrumbs__breadcrumb">
        <a class="breadcrumbs__link" href="{{ article.url }}" aria-current="page">{{ article.title }}</a>
      </li>

    {% else %}
      <li aria-current="page">
        <a class="breadcrumbs__link" href="{{ request.path }}" aria-current="page">{{ page_title }}</a>
      </li>

  {% endcase %}

  </ol>
</nav>
{% endunless %}
