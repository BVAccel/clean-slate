{% assign section_heading = section.settings.section_heading %}
{% assign section_text = section.settings.section_text %}
{% assign section_image = section.settings.section_image %}
{% assign section_theme_select = section.settings.section_theme_select %}
{% assign section_layout_select = section.settings.section_theme_layout %}

{% assign icon = 'arrow-right--white.svg' %}
{% if section_theme_select == 'light' %}
  {% assign icon = 'arrow-right-black.svg' %}
{% endif %}
 
<div class="text-overlay-section text-overlay-section--{{ section_theme_select }} text-overlay-section--{{ section_layout_select }}">

    <div class="text-overlay-section__container text-overlay-section__container--{{ section_layout_select }}">

        <picture class="text-overlay-section__picture">
            <source media="(min-width: 768px)" srcset="{{ section_image | img_url: '960x' }}, {{ section_image | img_url: '1920x'}} 2x">
            <source media="(min-width: 480px)" srcset="{{ section_image | img_url: '640x' }}, {{ section_image | img_url: '1280x'}} 2x">
            <source media="(min-width: 375px)" srcset="{{ section_image | img_url: '480x' }}, {{ section_image | img_url: '960x'}} 2x">
            <source srcset="{{ section_image | img_url: '375x' }}, {{ section_image | img_url: '750x' }} 2x">
            <img src="{{ section_image | img_url: '1200x' }}" alt="{{ section_image.alt | escape }}" class="text-overlay-section__image">
        </picture>

        <div class="text-overlay-section__content">
            {% if section_heading %}
                <h3 class="text-overlay-section__heading">{{ section_heading }}</h3>
                {%- if section_text != empty -%}
                    <div class="text-overlay-section__text">
                        <img src="{{ icon | asset_url }}" alt="" class="text-overlay-section__accent">
                        {{ section_text }}
                    </div>
                {%- endif -%}
            {% endif %}
        </div>

    </div>

</div>

{% schema %}
  {
    "name": "Text Overlay",
    "settings": [
      {
        "id": "section_heading",
        "type": "text",
        "label": "Heading"
      },
      {
        "id": "section_text",
        "type": "richtext",
        "label": "Text"
      },
      {
          "id": "section_image",
          "type": "image_picker",
          "label": "Background Image"
      },
      {
        "type": "select",
        "id": "section_theme_layout",
        "label": "Theme",
        "info": "pick a color theme for the section",
        "options": [
            {
                "value": "image-right",
                "label": "Image Right"
            },
            {
                "value": "image-left",
                "label": "Image Left"
            }
        ],
        "default": "image-right"
    },
      {
        "type": "select",
        "id": "section_theme_select",
        "label": "Theme",
        "info": "pick a color theme for the section",
        "options": [
            {
                "value": "dark",
                "label": "Dark"
            },
            {
                "value": "light",
                "label": "Light"
            }
        ],
        "default": "dark"
    }
    ]
  }
{% endschema %}
