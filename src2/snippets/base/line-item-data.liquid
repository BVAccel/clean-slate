{%- capture _arguments -%}
  {%- include 'argument',
    _value: _line_item,
    _name: '_line_item',
    _required: true -%}
{%- endcapture -%}

{%- capture _errors -%}
  {%- include 'errors' with _arguments, _snippet: 'variant' -%}
{%- endcapture -%}

{%- assign _arguments = nil -%}

{%- if _errors == '' -%}

  <script type="application/json" data-line-item-data>
  {
    "data": {

      "key": "{{- _line_item.key -}}",

      "properties": [{%- for property in _line_item.properties -%}
        "{{- property.first -}}": "{{- property.last -}}"{%- unless forloop.last -%},{%- endunless -%}
      {%- endfor -%}],

      "variant": {%- include 'variant-object', _variant: _line_item.variant -%}

    }
  }
  </script>

{%- else -%}

  {{- _errors -}}

{%- endif -%}

{%- assign _errors = nil -%}

